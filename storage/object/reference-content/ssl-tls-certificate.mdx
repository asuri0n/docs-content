---
meta:
  title: SSL/TLS Certificates for Object Storage with Edge Services
  description: Learn how to create and upload an SSL/TLS certificate to serve your bucket content over HTTPS through your customized Edge Services domain, and troubleshoot any potential problems.
content:
  h1: SSL/TLS Certificates for Object Storage with Edge Services
  paragraph: Learn how to create and upload an SSL/TLS certificate to serve your bucket content over HTTPS through your customized Edge Services domain, and troubleshoot any potential problems.
tags: object-storage edge-services ssl-tls certificate ssl tls pem certificate-authority root-certificate
categories: 
  - storage
---

This document contains information to help you create and upload an SSL/TLS certificate to serve your bucket content over HTTPS, through your customized [Edge Services](/storage/object/how-to/get-started-edge-services) domain.

## Introduction

### What is an SSL/TLS certificate? 

An SSL/TLS certificate is a digital certificate that enables an encrypted connection between a client and a web server over HTTPS. 

You may hear certificates referred to as “SSL certificates”, “TLS certificates” or “SSL/TLS certificates”. These are all the same thing. SSL (Secured Socket Layer) was the protocol initially used for encryption, though it has now been replaced with TLS (Transport Layer Security).

SSL/TLS certificates contain a public key, which corresponds to a separate private key. When a client wants to establish an encrypted connection to a host, it requests the host's certificate. The host shares the certificate, which includes the public key (the private key is never shared and is kept by the host). The client checks the certificate, and uses the host's public key to encrypt the data that it transfers to the host. The host uses its private key to decrypt the data that has been encrypted by the public key. 

### When and why do I need an SSL/TLS for Edge Services?

When you enable Edge Services, initially your bucket content is served through the standard Edge Services endpoint, e.g. `https://bucket-name.edge.scw.cloud`. Scaleway's own SSL/TLS certificate, which covers this subdomain, is used to establish the encrypted connection between client and host. If you do not want to customize the standard Edge Services endpoint, you do not need to worry about creating SSL/TLS certificates.

However, if you choose to [customize your Edge Services endpoint with your own subdomain](/storage/object/how-to/get-started-edge-services/#how-to-configure-a-custom-domain), Scaleway's own SSL/TLS certificate can no longer be used to establish encrypted connections. Client connections are now initially going to a different domain which needs to be "guaranteed" by its own certificate (despite the CNAME record for the subdomain pointing to the Scaleway endpoint). 

Therefore, when you customize your Edge Services endpoint with a subdomain, you are prompted to upload an SSL/TLS certificate for that subdomain. This certificate is stored in [Scaleway Secret Manager](https://www.scaleway.com/en/docs/identity-and-access-management/secret-manager/quickstart/).

## How to get a certificate

In general, SSL/TLS certificates can either be **self-signed** (signed by the subject of the certificate, e.g. the owner of the domain) or **CA-signed** (signed by a third party **C**ertificate **A**uthority which is publically trusted). 

**Self-signed certificates cannot be used with Edge Services, all certificates must be signed by a CA.**

To get an SSL/TLS certificate for your domain or subdomain, you need to generate a Certificate Signing Request (CSR) and submit it to a Certificate Authority (CA) for them to validate your domain, who then send you a signed certificate. You may be able to carry out this procedure via your hosting provider, or via the shell if you have shell access to your server.

Find below some useful guides from different CAs on how to obtain a certificate from them:

- [Let's Encrypt: Getting Started](https://letsencrypt.org/getting-started/). Let's Encrypt is a popular, non-profit CA that provides certificates at no cost. Note that the certificates are limited to 90 day validity, and must be renewed (again, at no cost) after this period.
- [ZeroSSL: Creating an SSL Certificates](https://help.zerossl.com/hc/en-us/articles/360060119373-Creating-an-SSL-Certificate). ZeroSSL is another CA, which provides 90-day certificates at no cost, or certificates of longer duration at a price.
- [Sectigo: Compare Sectigo SSL Certificates](https://www.sectigo.com/ssl-certificates-tls/compare). Sectigo is a CA who provide paid-for certificates with a validity period of between 1 and 6 years.

## Accepted certificate types

Types of validation:

- ❌ **Self-signed certificates** (see above)
- ✅ **Domain Validated Certificate**. The CA simply checks that the applicant owns the domain.
- ✅ **Extended/Organization Validation Certificate**. The applicant must pass more in-depth validation procedures and checks by the CA.

Types of domain coverage:

- ✅ **Single domain certificate**. Secures a single domain or subdomain. Note that the certificate must be for `your-sub.domain.com`, where the subdomain corresponds to the [subdomain for Edge Services](TODO). A single domain certificate simply for `yourdomain.com` would not be acceptable, as it would not cover the subdomain for Edge Services.
- ✅ **Wildcard certificate**. Secures multiple subdomains for a domain, using a wildcard `*` symbol. The **Common Name** of the certificate should look like `*.yourdomain.com`.
- ✅ **Multi-domain (MD) / Subject Alternative Name (SAN) / Unified Communications Certificate (UCC) certificate**.  Secures multiple explicitly-defined fully qualified domain names (`www.yourfirstdomain.com`, `sub.yourfirstdomain.com`, `yourfirstdomain.com`, `yourseconddomain.com`, `sub.yourseconddomain.com` etc.)

## PEM format certificate chain

Edge Services requires that you import your certificate as a `.PEM`-formatted certificate chain, which includes the private key.

The file should look like this:

```
-----BEGIN RSA PRIVATE KEY-----
(private key here)
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
(primary certificate (aka server certificate) here)
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
(intermediate certificate here)
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
(root certificate here)
-----END CERTIFICATE-----
```

| Section                  | Contains                                                         | Issued for   | Issued and signed by |
|--------------------------|------------------------------------------------------------------|--------------|----------------------|
| Private key              | The private key file for the certificate, e.g. `your_domain.key` |              |                      |
| Primary SSL certificate  | The certificate issued by the CA for your domain name            | Your name and public key  | CA      |
| Intermediate certificate | The intermediate certificate chaining your primary certificate to the root certificate | CA's name and public key | Root CA |
| Root certificate         | The root certificate by the CA, for the trusted CA itself        | The Root CA's name and public key | Root CA (self signed) |

## Uploading your certificate

When you [configure your customized domain](/storage/object/how-to/get-started-edge-services/#how-to-configure-a-custom-domain) with Edge Services for the first time, you are prompted to upload your certificate. You can do so in two ways:

    - Select an existing certificate that you have stored in [Scaleway Secret Manager](/identity-and-access-management/secret-manager/quickstart/).
    - Manually import a certificate into Scaleway Secret Manager, directly from the Edge Services **Configure domain** wizard (copy and paste the PEM formatted chain). Your certificate will be automatically stored in Secret Manager.

## Keeping your certificate up to date

SSL/TLS certificates all expire at some point. If your certificate expires before you upload a new one, you will see an error like this on your Edge Services dashboard:

    <Lightbox src="scaleway-cert-expired.webp" alt="Your SSL/TLS certificate has expired. Update your certificate in Secret Manager. Your initial certificate will remain in use until the error is fixed." />

You must renew your certificate or create a new one. A number of tools are available to ensure that certificates are automatically renewed before expiry, for example [Certbot for LetsEncrypt](https://eff-certbot.readthedocs.io/en/stable/using.html#renewing-certificates).

When you have your up to date certificate, go to [Secret Manager](https://console.scaleway.com/secret-manager/secrets) in the console,  and access the secret that contains your certificate. [Create a new version](/identity-and-access-management/secret-manager/how-to/create-version/) of the secret, to hold the up to date certificate. Edge Services will automatically detect and use the most recent enabled version of the secret. You can nonetheless choose to disable or delete the old version(s) as you prefer.

 ## Troubleshooting errors

Explain the various errors you can encounter with your certificate and how to fix them (see https://jira.infra.online.net/browse/CNS-6680?jql=project%20%3D%20CNS%20AND%20text~certificate%20ORDER%20BY%20priority%20DESC%2C%20updated%20DESC)






